<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PunyaSayaCode</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/detail.css" />
  </head>
  <body>
    <!-- navbar -->
    <nav class="my-nav mb-5">
      <div class="container py-3">
        <h1 class="my-nav-brand">PunyaSayaCode</h1>
      </div>
    </nav>

    <!-- main content -->
    <section id="main">
      <div class="container">
        <div class="row">
          <div class="col-md-6 col-sm-12">
            <div class="img-main mb-2">
              <img
                src="assets/img/nama-project/1.png"
                alt="gambar "
                class="img-thumbnail"
                id="img-main"
              />
            </div>
            <div class="img-lists mb-3" id="img-lists">
              <img
                src="assets/img/nama-project/1.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
              <img
                src="assets/img/nama-project/2.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
              <img
                src="assets/img/nama-project/3.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
              <img
                src="assets/img/nama-project/4.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
              <img
                src="assets/img/nama-project/5.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
              <img
                src="assets/img/nama-project/6.png"
                alt="img list"
                class="img-list m-1 img-active"
                onclick="gantiImg(this)"
              />
            </div>
            <div
              class="btn-img d-flex justify-content-center align-items-center"
            >
              <a href="index.html" class="btn-back w-50 mx-1">Kembali</a>
              <a href="" class="btn-wa w-50 mx-1" id="wa-beli">Whatsapp</a>
            </div>
            <hr class="w-100" />
          </div>

          <!-- detail -->
          <div class="col-md-6 col-sm-12" id="info">
            <h2 class="mb-0" id="judul">Project 1</h2>
            <h6 class="harga mb-4" id="harga">Rp.0,-</h6>

            <h6 class="sub-title">Deskripsi :</h6>
            <p class="deskripsi" id="deskripsi">
              Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptas
              tempore ut deserunt alias ad culpa quod adipisci perspiciatis
              dolores nobis dolor, labore, repudiandae placeat magni quaerat
              natus, aliquam facere hic.
            </p>

            <h6 class="sub-title">Fitur-fitur :</h6>
            <div class="fitur" id="fitur">
              <ol>
                <li>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Voluptates, eveniet.
                </li>
                <li>Lorem ipsum dolor sit amet consectetur.</li>
                <li>
                  Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                  Blanditiis fugit harum quo possimus cum nolla nobis ratione
                  voluptatibus mollitia?
                </li>
                <li>Lorem, ipsum.</li>
                <li>
                  lorem :
                  <ol>
                    <li>
                      Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                      Doloribus commodi odio ipsa at, voluptatem tenetur
                      praesentium fugit quasi saepe tempora quibusdam distinctio
                      itaque corrupti magnam, obcaecati eaque dicta assumenda
                      ducimus.
                    </li>
                    <li>Lorem ipsum dolor sit amet consectetur.</li>
                  </ol>
                </li>
              </ol>
            </div>

            <h6 class="sub-title">Teknologi :</h6>
            <ul id="teknologi">
              <li>Teknologi 1</li>
              <li>Teknologo 2</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
      crossorigin="anonymous"
    ></script>
    <script src="assets/fontawesome/js/all.min.js"></script>
    <!-- <script src="assets/js/detail.js"></script> -->
    <script>
      const img_lists = document.querySelector("#img-lists");
      const img_main = document.querySelector("#img-main");
      const wa_beli = document.querySelector("#wa-beli");
      const judul = document.querySelector("#judul");
      const harga = document.querySelector("#harga");
      const deskripsi = document.querySelector("#deskripsi");
      const fitur = document.querySelector("#fitur");
      const teknologi = document.querySelector("#teknologi");
      const xhr = new XMLHttpRequest();

      // action
      xhr.onload = () => {
        if (xhr.status == 200) {
          const datas = JSON.parse(xhr.responseText);
          console.log(datas);
          const data_detail = searchData(datas.datas);
          isiKontenDetail(data_detail, datas.wa);
        } else {
          console.log("gagal load data");
        }
      };
      xhr.open("GET", "resource.json");
      xhr.send();

      // functions
      function gantiImg(e) {
        img_main.setAttribute("src", e.getAttribute("src"));
      }

      function searchData(dt) {
        const url = window.location.search.substring(1);
        const id_now = url.split("=")[1];
        let result = null;
        dt.forEach((e) => {
          if (e.id == id_now) {
            result = e;
          }
        });
        return result;
      }

      function tmpltImgList(count, folder) {
        let tmplt = ``;
        for (let i = 1; i <= count; i++) {
          tmplt += `
          <img
            src="${folder}${i}.png"
            alt="img list"
            class="img-list m-1 img-active"
            onclick="gantiImg(this)"
          />
          `;
        }
        return tmplt;
      }

      function setLinkWa(judul, wa) {
        return (
          `https://api.whatsapp.com/send/?phone=${wa}&text=halo%20admin%20saya%20ingin%20membeli%20` +
          judul.replace(" ", "%20")
        );
      }

      function tmpltTeknologi(dt) {
        let tmplt = ``;
        dt.forEach((e) => {
          tmplt += `<li>${e}</li>`;
        });
        return tmplt;
      }

      function isiKontenDetail(dt, wa) {
        console.log(dt);
        img_main.setAttribute("src", dt.img_folder + dt.img_main + ".png");
        img_lists.innerHTML = tmpltImgList(dt.img_count, dt.img_folder);
        wa_beli.setAttribute("href", setLinkWa(dt.judul, wa));
        wa_beli.setAttribute("target", "_blank");
        console.log(dt.fitur);
        judul.innerHTML = dt.judul;
        harga.innerHTML = dt.harga;
        deskripsi.innerHTML = dt.deskripsi;
        fitur.innerHTML = dt.fitur;
        teknologi.innerHTML = tmpltTeknologi(dt.teknologi);
      }
    </script>
  </body>
</html>
